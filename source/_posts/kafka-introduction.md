---
title: Kafka读书笔记 -- 初识Kafka
date: 2018-10-05 23:29:21
categories:
  - Kafka
tags:
  - Kafka
---

### 1 相关概念
1. Kafka一般被称为『分布式提交日志』或者『分布式流平台』
2. 文件系统或数据库提交日志用来提供所有事务的持久记录，通过重放这些日志可以重建系统的状态
  - Kafka的数据是按照一定顺序持久化保存的，可以按需读取
3. Kafka的数据分布在整个系统里，具备数据故障保护和性能伸缩能力

<!-- more -->

#### 1.1 消息和批次
1. Kafka的数据单元被称为消息
2. 消息由**字节数组**组成，消息里的数据没有特别的格式或者含义
3. 消息可以有一个可选的**元数据**，就是键，键也是一个**字节数组**，同样没有特殊含义
  - 消息以**一种可控的方式写入不同的分区**时，会用到键
  - 例如为键生成一个一致性散列值，然后使用散列值对主题分区数进行取模，为消息选取分区，从而保证具有相同键的消息总是被写入到相同的分区
4. 为了提高效率，消息被**分批**写入Kafka，**批次就是一组消息**，这些消息**属于同一个主题和分区**
  - 如果每个消息都单独穿行于网络，会导致大量的网络开销，把消息分成批次传输可以减少网络开销
  - 不过，这需要在**时间延迟**和**吞吐量**之间做出权衡：批次越大，单位时间内处理的消息就会越多，耽搁消息的传输时间就会越长
  - 批次数据会被**压缩**，这样可以提升数据的传输和存储能力，但要做更多的计算处理

#### 1.2 模式


<!-- indicate-the-source -->
